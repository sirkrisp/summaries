
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      <link rel="icon" href="../../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.2, mkdocs-material-7.2.2">
    
    
      
        <title>Homework 2 - My Docs</title>
      
    
    
      <link rel="stylesheet" href="../../../../../assets/stylesheets/main.1118c9be.min.css">
      
        
        <link rel="stylesheet" href="../../../../../assets/stylesheets/palette.ba0d045b.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
      <link rel="stylesheet" href="../../../../../css/custom-elements.css">
    
      <link rel="stylesheet" href="../../../../../css/material-colors.css">
    
      <link rel="stylesheet" href="../../../../../css/material-shadows.css">
    
      <link rel="stylesheet" href="../../../../../css/material-components.css">
    
    
      


    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    <script>function __prefix(e){return new URL("../../../../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#homework-2" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../../.." title="My Docs" class="md-header__button md-logo" aria-label="My Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            My Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Homework 2
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../../.." title="My Docs" class="md-nav__button md-logo" aria-label="My Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    My Docs
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../../../about/" class="md-nav__link">
        About
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" data-md-state="indeterminate" type="checkbox" id="__nav_3" checked>
      
      <label class="md-nav__link" for="__nav_3">
        Summaries
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Summaries" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Summaries
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_1" data-md-state="indeterminate" type="checkbox" id="__nav_3_1" checked>
      
      <label class="md-nav__link" for="__nav_3_1">
        Software Design
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Software Design" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_1">
          <span class="md-nav__icon md-icon"></span>
          Software Design
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../software%20design/overview/" class="md-nav__link">
        Overview
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../software%20design/factory/" class="md-nav__link">
        Factory
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_2" data-md-state="indeterminate" type="checkbox" id="__nav_3_2" checked>
      
      <label class="md-nav__link" for="__nav_3_2">
        Algorithms Lab
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Algorithms Lab" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_2">
          <span class="md-nav__icon md-icon"></span>
          Algorithms Lab
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../Algorithms%20Lab/prefix_sum_and_precomputation/" class="md-nav__link">
        Prefix Sum and Precomputation
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../Algorithms%20Lab/sliding_window/" class="md-nav__link">
        Sliding Window
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../Algorithms%20Lab/dynamic_programming/" class="md-nav__link">
        Dynamic Programming
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../Algorithms%20Lab/numbers_and_computation/" class="md-nav__link">
        Numbers: Representation and Computation (CGAL)
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../Algorithms%20Lab/geometric_computing/" class="md-nav__link">
        Geometric Computing
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../Algorithms%20Lab/boost_graph_library/" class="md-nav__link">
        Boost Graph Library
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../Algorithms%20Lab/greedy/" class="md-nav__link">
        Greedy Algorithms
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../Algorithms%20Lab/proximity_structures/" class="md-nav__link">
        Proximity Structures
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_2_9" data-md-state="indeterminate" type="checkbox" id="__nav_3_2_9" checked>
      
      <label class="md-nav__link" for="__nav_3_2_9">
        Exercises
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Exercises" data-md-level="3">
        <label class="md-nav__title" for="__nav_3_2_9">
          <span class="md-nav__icon md-icon"></span>
          Exercises
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../Algorithms%20Lab/exercises/w01/" class="md-nav__link">
        week 1
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../Algorithms%20Lab/exercises/w02/" class="md-nav__link">
        week 2
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../Algorithms%20Lab/exercises/w03/" class="md-nav__link">
        week 3
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../Algorithms%20Lab/exercises/w04/" class="md-nav__link">
        week 4
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../Algorithms%20Lab/exercises/w05/" class="md-nav__link">
        week 5
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../Algorithms%20Lab/exercises/w07/" class="md-nav__link">
        week 7
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../Algorithms%20Lab/exercises/w08/" class="md-nav__link">
        week 8
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../Algorithms%20Lab/pows/pows/" class="md-nav__link">
        Problems of the week
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" data-md-state="indeterminate" type="checkbox" id="__nav_4" checked>
      
      <label class="md-nav__link" for="__nav_4">
        Advanced Systems Lab
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Advanced Systems Lab" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Advanced Systems Lab
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../asl/" class="md-nav__link">
        Lectures
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../project/" class="md-nav__link">
        Project (t-SNE)
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" data-md-state="indeterminate" type="checkbox" id="__nav_5" checked>
      
      <label class="md-nav__link" for="__nav_5">
        Optimization for Data Science
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Optimization for Data Science" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Optimization for Data Science
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../../ODS/ods/" class="md-nav__link">
        Lectures
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../../ODS/ex1/" class="md-nav__link">
        Exercise Set 1
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../../ODS/ex2/" class="md-nav__link">
        Exercise Set 2
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" data-md-state="indeterminate" type="checkbox" id="__nav_6" checked>
      
      <label class="md-nav__link" for="__nav_6">
        Soft Bio-hybrid Robotics
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Soft Bio-hybrid Robotics" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Soft Bio-hybrid Robotics
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../../SBRC/sbrc/" class="md-nav__link">
        Lectures
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" data-md-state="indeterminate" type="checkbox" id="__nav_7" checked>
      
      <label class="md-nav__link" for="__nav_7">
        Notes
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Notes" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Notes
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1" data-md-state="indeterminate" type="checkbox" id="__nav_7_1" checked>
      
      <label class="md-nav__link" for="__nav_7_1">
        Flutter
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Flutter" data-md-level="2">
        <label class="md-nav__title" for="__nav_7_1">
          <span class="md-nav__icon md-icon"></span>
          Flutter
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../notes/flutter/02_setup/" class="md-nav__link">
        Setup
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../notes/flutter/03_app_from_scratch/" class="md-nav__link">
        I am rich
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../notes/flutter/06_MiCard/" class="md-nav__link">
        MiCard
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../notes/flutter/07_dicee/" class="md-nav__link">
        Dicee - Building Apps with State
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../notes/flutter/09_xylophone/" class="md-nav__link">
        Xylophone - Using Flutter and Dart Packages
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../notes/flutter/10_quizzler/" class="md-nav__link">
        Quizzler - Modularising & Organizing Flutter Code
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../notes/flutter/12_bmi/" class="md-nav__link">
        BMI Calculator - Building Flutter UIs for Intermediates
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../notes/flutter/13_clima/" class="md-nav__link">
        Clima - Powering Your Flutter App with Live Weather Web Data
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../notes/flutter/14_bitcoin/" class="md-nav__link">
        Bitcoin Ticker
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../notes/flutter/15_chat/" class="md-nav__link">
        Chat App w. Firebase
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../notes/flutter/16_todoey/" class="md-nav__link">
        Todoey - State Management
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-optimization-blockers" class="md-nav__link">
    1. Optimization Blockers
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-microbenchmarks" class="md-nav__link">
    2. Microbenchmarks
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="homework-2">Homework 2</h1>
<p>Krispin Wandel, 15-941-388</p>
<h2 id="1-optimization-blockers">1. Optimization Blockers</h2>
<p>a)</p>
<p>Results of optimizations:</p>
<table>
<thead>
<tr>
<th>Algorithm</th>
<th>Â Runtime [cycles]</th>
<th>Speedup</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>slow_performance1</code></td>
<td>53300</td>
<td>-</td>
</tr>
<tr>
<td><code>slow_performance2</code></td>
<td>6740</td>
<td>7.91</td>
</tr>
<tr>
<td><code>maxperformance</code></td>
<td>2767</td>
<td>19.26</td>
</tr>
</tbody>
</table>
<p>Code of <code>slow_performance1</code> as reference:</p>
<p><code>c++ {.line-numbers}
void slow_performance1(float* x, float *y, float *z, int n) {
    for (int i = 0; i &lt; n - 2; i++) {
        x[i]     = x[i] / M_SQRT2 + y[i] * C1;
        x[i+1]  += z[(i % 4) * 10] * C2;
        x[i+2]  += sin ((2 * M_PI * i) / 3) * y[i+2];
    }
}</code></p>
<p><code>slow_performance2</code>:
First, I split the loop inside <code>slow_performance1</code> into three seperate loops where in each loop I optimized lines 3-5 accordingly. For each loop I did the following optimization: 
1) [Line 3] Instead of dividing through <code>M_SQRT2</code> in each iteration we can simply pre-compute <code>1 / M_SQRT2</code> and then perform a much cheaper multiplication in each iteration.
2) [Line 4] <code>z[(i % 4) * 10] * C2</code> can be pre-computed as well as it takes on only four values. We can then create a for-loop where in each iteration we assign those four values to the next four entries.
3) [Line 5] Similar to the previous optimization, we can pre-compute <code>sin ((2 * M_PI * i) / 3)</code> as it evaluates either to zero or to +/- <span class="arithmatex">\(\sin(2 \pi / 3)\)</span>. Again,we assign those three values to the next three entries in each iteration of the for-loop.</p>
<p><code>maxperformance</code>:
It turns out that by merging those three for loops one can perform further simplifications. As the loop variable in loop (2) of <code>slow_performance2</code> is increased by four and in loop (3) increased by three, I merged those loops by iterating over the next 12 (the least common multiple of 3 and 4) entries in each step. One can then simplify all computations to only 2 floating point multiplications and additions per entry in <span class="arithmatex">\(x\)</span>.</p>
<p>b) As seen from the table above, the maximum speedup I got was 19.26.</p>
<p>c) The cost is roughly:</p>
<div class="arithmatex">\[
C = 2n \cdot C_\text{add} + 2n \cdot C_\text{mult}
\]</div>
<p><span class="arithmatex">\(n=1022\)</span> in all tests. Hence, <code>maxperformance</code> has a performance of 
$$
\frac{4088\ \text{flops}}{2767\ \text{cycles}} = 1.48 \frac{\text{flops}}{\text{cycles}}
$$</p>
<h2 id="2-microbenchmarks">2. Microbenchmarks</h2>
<p>The following table summarizes the results from my micro-benchmarks:</p>
<table>
<thead>
<tr>
<th>Operation</th>
<th>Latency [cycles]</th>
<th>Gap [cycles]</th>
</tr>
</thead>
<tbody>
<tr>
<td>Add</td>
<td>4.01</td>
<td>0.58</td>
</tr>
<tr>
<td>Div</td>
<td>14.03</td>
<td>4.01</td>
</tr>
<tr>
<td>Div (min)</td>
<td>13.03</td>
<td>4.01</td>
</tr>
<tr>
<td>Foo</td>
<td>18.04</td>
<td>4.01</td>
</tr>
<tr>
<td>Foo (min)</td>
<td>17.04</td>
<td>4.01</td>
</tr>
</tbody>
</table>
<p>a) As we can see from the table above, the latency and gap of floating point addition and multiplication match the specifications provided by Intel. However, the gap of floating point addition deviates slightly more from its nominal value than the other operations, although not significantly. The reason for that is likely due to the simplicity of floating point addition and the overhead caused by the <code>for</code>and <code>while</code> loop involved in my measurement for <code>add</code>. Moreover, we can observe that the latency of floating point division decreases by a full cycle when we use trivial divisions such as <span class="arithmatex">\(\frac{1}{1}\)</span> or <span class="arithmatex">\(\frac{0}{1}\)</span>.</p>
<p>b) The latency and gap of <span class="arithmatex">\(f(x)\)</span> matches what we would expect. In order to compute <span class="arithmatex">\(f(x)\)</span> we first have to invoke a <code>fma</code> operation and then a <code>div</code> operation. <code>fma</code> has a latency of 4 cycles and a gap of 0.5 cycles. Hence, the total latency is <span class="arithmatex">\(4+14=18\)</span> cycles and the gap is equal to <span class="arithmatex">\(max(0.5,4) = 4\)</span> cycles. Furthermore, <span class="arithmatex">\(f(0) = \frac{0}{1}\)</span> is a trivial division and therefore we get a minimum latency of 17 cycles.</p>
<p>c) If <code>fma</code> is disabled, the latency will change, whereas the gap stays the same. In particular, the <code>fma</code> will change to an <code>add</code> and a <code>mul</code>. Note that the addition relies on the result of the multiplication, thus, <code>add</code> and <code>mul</code> cannot be executed in parallel. Both, floating point addition and multiplication, have a latency of 4 and a gap of 0.5 on Skylake. Hence, the total latency will be <span class="arithmatex">\(8+14(13)=22(21)\)</span>. The gap stays the same as the gap of addition and multiplication is smaller than the gap of division.</p>
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../../../../..", "features": ["navigation.instant", "navigation.expand"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../../../../assets/javascripts/workers/search.709b4209.min.js", "version": null}</script>
    
    
      <script src="../../../../../assets/javascripts/bundle.2b46852b.min.js"></script>
      
        <script src="../../../../../javascripts/config.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>